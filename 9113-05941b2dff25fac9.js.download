try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="64f26e7a-9e26-4b6d-85c4-5d07c35f59e9",e._sentryDebugIdIdentifier="sentry-dbid-64f26e7a-9e26-4b6d-85c4-5d07c35f59e9")}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9113],{17023:(e,t,a)=>{a.d(t,{Z:()=>l,m:()=>i});var n=a(95155),r=a(12115),s=a(1021),o=a(60750),l=function(e){return e.Hover="hover",e.Click="click",e.None="none",e}({});let i=e=>{let{emoji:t,className:a,width:l=20,height:i=20,selected:c=!1,triggerType:d="hover",...u}=e,[x,p]=(0,r.useState)(!1),{getLottieData:f}=(0,o.k)(),[m,h]=(0,r.useState)(!1),b="".concat(null==t?void 0:t.interaction_type,"-").concat(l,"-").concat(i),g=()=>"none"!==d&&("hover"===d?x:"click"===d&&c);return(0,n.jsx)("div",{className:a,...u,onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),children:(0,n.jsxs)("div",{style:{position:"relative",width:l,height:i},children:[g()&&t&&(0,n.jsx)(s.A,{loop:"click"!==d||!c,animationPath:t.lottie,animationData:f(t.lottie),className:"absolute top-0 left-0 h-full w-full",style:{position:"absolute",top:0,left:0,width:l,height:i,opacity:m&&g()?1:0,zIndex:1},onLoad:()=>h(!0)}),(0,n.jsx)("div",{style:{position:"absolute",top:0,left:0,width:l,height:i,opacity:m&&g()?0:1},children:(null==t?void 0:t.icon)?(0,n.jsx)("img",{src:t.icon,alt:(null==t?void 0:t.display_name)||"",width:l,height:i,style:{width:l,height:i}},b):null})]})})}},47606:(e,t,a)=>{a.d(t,{A:()=>l});var n=a(95155),r=a(12115),s=a(56389),o=a(26846);let l=e=>{let{className:t,hoverAlign:a="center",points:l}=e,[i,c]=(0,r.useState)(!1),d=(0,r.useRef)(null),{track:u}=(0,s.s)(),[x,p]=(0,r.useState)(0);return(0,r.useEffect)(()=>{d.current&&p(d.current.offsetWidth)},[d.current]),(0,r.useEffect)(()=>{u("knot_num_show",{knot_num:l})},[l]),(0,n.jsxs)("div",{className:(0,o.cn)("relative inline-block",t),children:[i&&(0,n.jsxs)("div",{className:(0,o.cn)("absolute bottom-full z-10 mb-3 w-[280px] rounded-[12px] bg-white p-4 shadow-lg","left"===a?"left-0":"left-1/2 -translate-x-1/2"),children:[(0,n.jsx)("div",{className:"text-[12px] text-black/65",children:"Knot is earned through views, reactions, saves, remixes, and comments on your projects â€” designed to reward creativity and genuine engagement. Suspicious or inauthentic activity won't count. You'll be able to cash out your knot in the future."}),(0,n.jsx)("div",{className:"absolute top-full h-0 w-0 border-x-8 border-t-8 border-x-transparent border-t-white",style:{left:"left"===a?x/2:"50%",transform:"translateX(-50%)"}})]}),(0,n.jsxs)("div",{ref:d,className:"bg-brand/10 flex h-[18px] cursor-pointer items-center gap-0.5 rounded-[4px] px-1",onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),children:[(0,n.jsx)("span",{className:"text-brand text-[12px] font-bold",children:l.toLocaleString("en-US",{maximumFractionDigits:0})}),(0,n.jsx)("span",{className:"text-brand/65 text-[12px]",children:"Knot"})]})]})}},68236:(e,t,a)=>{a.d(t,{A:()=>n});let n={src:"/_next/static/media/reaction-icon.de690e61.png",height:1080,width:1920,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAMAAABPT11nAAAAV1BMVEX2tyP90kr3zyr/vyjpuSr3xyHwuiP2sR/VuihMaXH2yyiflmT+iS5Vqcv1eDmLvI/zcRbSkC3GnDT/0iniph7wVDfoqRz5uy3/1y//20HguiX3zC3ewCv3RSxyAAAAGHRSTlM3lvxY0SKpZ/cAWcnFceLmot61rZm+WZaO/574AAAACXBIWXMAABYlAAAWJQFJUiTwAAAANElEQVR4nAXBBwLAEBAAwSU4JKRpKf9/pxmUWYiWwKO/no898fr/rtt6Mfwoxp2COKFZwgQprAHd2JMMaAAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:5}},70165:(e,t,a)=>{a.d(t,{FW:()=>i,Hx:()=>l,RE:()=>o,Vt:()=>s,lf:()=>c,v1:()=>r});var n=a(49509);let r="0000000000000000000000000000",s="00000000-0000-0000-0000-000000000000";n.env.JWT_SECRET_KEY;let o="header_banner_close_date",l="first_time_favorite_users",i=3,c=500},99113:(e,t,a)=>{a.r(t),a.d(t,{default:()=>V});var n=a(95155),r=a(25427),s=a(48788),o=a(6874),l=a.n(o),i=a(35695),c=a(12115),d=a(53030),u=a(10862),x=a(56389),p=a(62128),f=a(48436);let m=e=>{let{onSuccess:t,onError:a}=e,{loginWithGoogleOneTap:n}=(0,u.A)(),{track:r}=(0,x.s)(),s=(0,c.useRef)(!1),o=(0,c.useRef)(0);(0,c.useEffect)(()=>{if(s.current)return;let e=()=>{if(!window.google){o.current<20?(o.current+=1,p.Ay.info("Google One Tap initialization attempt ".concat(o.current,"/").concat(20)),setTimeout(e,500)):p.Ay.error("Failed to initialize Google One Tap: Google script not loaded after maximum attempts");return}if(!s.current)try{window.google.accounts.id.initialize({client_id:"541265544701-ig5gkv7jg7a6od2rip81vpv99fej0oja.apps.googleusercontent.com",callback:l,auto_select:!1,cancel_on_tap_outside:!1,prompt_parent_id:"google-one-tap-container"}),window.google.accounts.id.prompt(e=>{p.Ay.info("Google One Tap prompt callback",{isNotDisplayed:e.isNotDisplayed(),isSkippedMoment:e.isSkippedMoment(),isDismissedMoment:e.isDismissedMoment(),momentType:e.getMomentType()}),e.isNotDisplayed()?p.Ay.info("Google One Tap not displayed",{reason:e.getMomentType()}):e.isSkippedMoment()?p.Ay.info("Google One Tap skipped",{reason:e.getMomentType()}):e.isDismissedMoment()&&p.Ay.info("Google One Tap dismissed",{reason:e.getMomentType()})}),s.current=!0,p.Ay.info("Google One Tap initialized successfully")}catch(e){p.Ay.error("Error initializing Google One Tap",e),null==a||a(e)}};return e(),()=>{}},[t,a]);let l=async e=>{try{p.Ay.info("Google One Tap credential response received"),r("login_continue_button_click",{login_platform:"google_one_tap"}),await n(e.credential),r("login_status",{result:"success",login_platform:"google_one_tap"}),null==t||t()}catch(e){p.Ay.error("Google One Tap login error",e),r("login_status",{result:"failed",login_platform:"google_one_tap",fail_reason:e.message||"unknown error"}),(0,f.P)({message:"login failed, please try again later",type:"error"}),null==a||a(e)}};return null};var h=a(90239),b=a(66139),g=a(26846),v=a(70165);let j={setBannerCloseDateCookie:e=>{try{let t=new Date;t.setDate(t.getDate()+30),t.setHours(0,0,0,0),document.cookie="".concat(v.RE,"=").concat(e,"; expires=").concat(t.toUTCString(),"; path=/; SameSite=Lax")}catch(e){}},getBannerCloseDateCookieClient:()=>{try{let e=document.cookie.split(";").find(e=>e.trim().startsWith("".concat(v.RE,"=")));return null==e?void 0:e.split("=")[1]}catch(e){return}},showBanner:()=>{try{let e=j.getBannerCloseDateCookieClient();if(!e)return!0;let t=new Date().toISOString().split("T")[0];return e!==t}catch(e){return!1}},closeBanner:()=>{try{let e=new Date().toISOString().split("T")[0];j.setBannerCloseDateCookie(e)}catch(e){}}},y=e=>{let{showBanner:t=!0,onClose:a,initialBannerState:s}=e,[o,l]=(0,c.useState)(null!=s&&s),i=(0,h.I)(!1,1132);(0,c.useEffect)(()=>{void 0===s&&l(j.showBanner())},[s]);let d=e=>{e.stopPropagation(),e.preventDefault(),window.open("https://www.youware.com/project/retro-challenge-result-announcement-6zq5ronmy0","_blank")};return t&&o?(0,n.jsx)("div",{className:"fixed top-0 right-0 left-0 z-[40] flex h-[64px] items-center px-4 min-[840px]:h-[50px]",style:{backgroundImage:"url('/banner/retro-bg.png')",backgroundRepeat:"repeat-x",backgroundSize:"contain",backgroundColor:"#3E413C"},onClick:i?d:void 0,children:(0,n.jsxs)("div",{className:"z-10 flex flex-1 items-center justify-between min-[840px]:justify-center",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("img",{src:"/banner/retro-logo.png",alt:"Retro Computer",className:"mr-3 flex-none",style:{width:"40px",height:"40px"}}),(0,n.jsx)("div",{className:"text-[14px] text-white min-[840px]:text-[16px]",children:(0,n.jsx)("span",{children:"YouWare Retro Challenge Results Are In. See Who Built the Coolest Retro Sites and Won Big!"})})]}),(0,n.jsxs)("div",{className:"ml-3 flex items-center",children:[!i&&(0,n.jsx)("img",{src:"/banner/retro-btn-result.png",alt:"Meet the Winners",className:"hidden h-[32px] w-[130px] hover:cursor-pointer hover:opacity-85 min-[840px]:block",onClick:d}),(0,n.jsx)(r.Qks,{className:"ml-1 h-5 w-5 text-white hover:cursor-pointer hover:opacity-85 min-[840px]:absolute min-[840px]:right-[22px]",onClick:e=>{e.stopPropagation(),e.preventDefault(),l(!1),j.closeBanner(),a&&a()}})]})]})}):null};var w=a(46102),_=a(34477);let k=(0,_.createServerReference)("00f3bc92f685a0f844c2d09a49c128dfdbbe4dca53",_.callServer,void 0,_.findSourceMapURL,"getUnreadCount"),N=(0,_.createServerReference)("00c129a22f40e70098856953d0c19e90c003042b7c",_.callServer,void 0,_.findSourceMapURL,"markAllAsRead"),A=(0,_.createServerReference)("4098bf77ecf0e98f35cdcf3d1f804470b881e2cedc",_.callServer,void 0,_.findSourceMapURL,"getNotifications");var S=a(68192),C=a(66766),R=a(68236),E=a(17023),T=a(78161),D=a(60750),F=a(30832),M=a.n(F),I=a(96004),z=a.n(I),B=a(617),O=a.n(B);M().extend(z()),M().extend(O());let L=e=>{var t,a,s,o,l,i,d,p;let{notification:f,index:m,enter_from:h}=e,{emojis:b}=(0,D.k)(),{track:v}=(0,x.s)(),{user:j}=(0,u.A)(),y="official"===f.type,w=null===(t=f.comment_params)||void 0===t?void 0:t.reply_user,[_,k]=(0,c.useState)(!1),N=(0,c.useRef)(null);(0,c.useEffect)(()=>{if(_||!N.current)return;let e=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting&&!_){var t,a;v("notification_message_show",{notification_id:f.id,notification_type:f.type,project_id:null===(t=f.project)||void 0===t?void 0:t.project_id,project_url:null===(a=f.project)||void 0===a?void 0:a.project_url,index:m+1,is_read:f.is_read,enter_from:h}),k(!0)}})},{threshold:.5});return e.observe(N.current),()=>e.disconnect()},[_,f.id,f.type,null===(a=f.user)||void 0===a?void 0:a.uid,v]);let A=()=>{var e,t;return{notification_id:f.id,notification_type:f.type,project_id:null===(e=f.project)||void 0===e?void 0:e.project_id,project_url:null===(t=f.project)||void 0===t?void 0:t.project_url,index:m+1,is_read:f.is_read}},S=e=>{e.stopPropagation(),window.open("/profile/".concat(f.user.uid,"?enter_from=notification_center"),"_blank"),v("notification_user_profile_click",{...A(),user_profile_url:"/user/".concat(f.user.uid)})},F=null!==(p=null!==(d=null===(s=f.project)||void 0===s?void 0:s.custom_cover_url)&&void 0!==d?d:null===(o=f.project)||void 0===o?void 0:o.cover_url)&&void 0!==p?p:"";return(0,n.jsxs)("div",{ref:N,className:"group flex w-full cursor-pointer items-start overflow-visible rounded-[12px] p-1.5 transition-all hover:bg-[#F7F7F7]",onClick:()=>{if(f.project){var e;let t=f.project.project_url,a="".concat(t,"?enter_from=notification_center").concat("comment"===f.type?"&comment_id=".concat(null===(e=f.comment_params)||void 0===e?void 0:e.comment_id):"");window.open(a,"_blank"),v("notification_message_click",{...A()})}},children:[(0,n.jsxs)("div",{className:(0,g.cn)("group/user relative box-content h-[30px] w-[30px] flex-shrink-0 overflow-visible rounded-full border border-black/3",y?"":"cursor-pointer"),onClick:y?void 0:S,children:[y?(0,n.jsx)("img",{src:"/icons/logo-with-bg.svg",alt:"",className:"h-full w-full rounded-full"}):(0,n.jsx)("img",{src:(null===(l=f.user)||void 0===l?void 0:l.photo_url)||"/images/avatar.svg",alt:"",className:"h-full w-full rounded-full"}),y?null:(0,n.jsx)("div",{className:"absolute inset-0 rounded-full bg-black/12 opacity-0 transition-all group-hover/user:opacity-100"}),y?null:(0,n.jsxs)("div",{className:"absolute top-[14px] left-[18px] flex h-[22px] w-[22px] items-center justify-center rounded-full bg-white group-hover:bg-[#F7F7F7]",children:["remix"===f.type&&(0,n.jsx)(r.xP3,{className:"h-3 w-3"}),"favorite"===f.type&&(0,n.jsx)(r.YSf,{className:"h-3 w-3"}),"emoji_reaction"===f.type&&(0,n.jsx)(C.default,{className:"h-[10px] w-[18px]",src:R.A,alt:""}),"comment"===f.type&&(0,n.jsx)(r.Z0O,{className:"h-3 w-3"})]})]}),(0,n.jsxs)("div",{className:"mr-2 ml-3 flex flex-1 flex-shrink-1 flex-col justify-between overflow-x-auto",children:[(0,n.jsx)("div",{className:(0,g.cn)("flex items-center self-start text-[14px]",y?"":"cursor-pointer hover:underline"),onClick:y?void 0:S,children:(0,n.jsx)("div",{children:y?"YouWare Team":f.user.display_name})}),(0,n.jsx)("div",{className:"no-scrollbar mt-0.5 mb-2 text-[12px] text-black/65",children:y?(0,n.jsx)("span",{className:"flex-shrink-0",children:f.content}):"remix"===f.type?(0,n.jsx)("span",{className:"flex-shrink-0",children:"Remixed your project"}):"favorite"===f.type?(0,n.jsx)("span",{className:"flex-shrink-0",children:"Saved your project"}):"emoji_reaction"===f.type?(0,n.jsxs)("div",{className:"flex flex-shrink-1 items-center overflow-x-auto",children:[(0,n.jsx)("span",{className:"mr-[3px] flex-shrink-0",children:"Reacted:"}),(0,n.jsx)("div",{className:"no-scrollbar flex flex-shrink-1 items-center gap-0.5 overflow-scroll",children:null===(i=f.emojis)||void 0===i?void 0:i.map(e=>(0,n.jsx)(E.m,{emoji:b.find(t=>t.interaction_type===e),width:12,height:12},e))})]}):"comment"===f.type?(0,n.jsxs)("div",{className:"line-clamp-3 flex-shrink-0",children:[w?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{children:"Reply to "}),w.uid===(null==j?void 0:j.uid)?(0,n.jsx)("span",{children:"you"}):(0,n.jsx)("span",{className:"font-bold text-black/95 hover:underline",onClick:e=>{e.stopPropagation(),w&&(window.open("/profile/".concat(w.uid,"?enter_from=notification_center"),"_blank"),v("notification_user_profile_click",{...A(),reply_user_url:"/user/".concat(w.uid)}))},children:w.display_name})]}):(0,n.jsx)("span",{children:"Comment"}),(0,n.jsx)("span",{children:": "}),f.content]}):null}),(0,n.jsx)("div",{className:"text-[12px] text-black/30",children:(0,n.jsx)("span",{children:function(e){let t=M()(e);return t.isToday()?t.format("HH:mm"):t.format("M/D")}(f.timestamp)})})]}),y&&!f.project?null:(0,n.jsxs)("div",{className:"group/project relative h-12 w-12 flex-shrink-0 overflow-hidden rounded-[8px] border border-black/3",children:[F&&!F.includes("placehold.co")?(0,n.jsx)(T.A,{url:F,className:"h-12 w-12 object-cover"}):(0,n.jsx)("div",{className:"h-12 w-12 bg-black/6"}),(0,n.jsx)("div",{className:"absolute inset-0 bg-black/12 opacity-0 transition-all group-hover/project:opacity-100"})]})]})},U=e=>{let{onNotificationTipsAction:t}=e,{shouldShowNotificationTips:a}=(0,S.e6)(),{track:r}=(0,x.s)(),s=e=>{t("allow"===e),r("browser_notification_auth_guide_click",{location:"notification_message",result:e})};return((0,c.useEffect)(()=>{a()&&r("browser_notification_auth_guide_show",{enter_from:"notification_message"})},[a]),a())?(0,n.jsxs)("div",{className:"my-2.5 flex flex-col gap-3 rounded-[12px] bg-black/3 px-[14px] py-[14px]",children:[(0,n.jsx)("div",{className:"text-[14px] text-black/95",children:"Turn on browser notifications to stay updated on all community interactions."}),(0,n.jsxs)("div",{className:"flex items-center justify-end gap-4",children:[(0,n.jsx)("div",{className:"cursor-pointer text-[14px] font-bold text-black/65",onClick:()=>s("not_now"),children:"Not now"}),(0,n.jsx)("div",{className:"cursor-pointer text-[14px] font-bold text-[#0077FF]",onClick:()=>s("allow"),children:"Enable"})]})]}):null};function W(e){let{onClose:t,hasBanner:a=!1,enter_from:s}=e,[o,l]=(0,c.useState)([]),[i,d]=(0,c.useState)(!0),[u,f]=(0,c.useState)(!1),[m,h]=(0,c.useState)(void 0),[b,v]=(0,c.useState)(!1),[j,y]=(0,c.useState)(!1),w=(0,c.useRef)(null),_=(0,c.useRef)(null),k=(0,c.useRef)(null),N=(0,c.useRef)(null),{track:C}=(0,x.s)(),{handleNotificationTipsAction:R,requestPermission:E,shouldShowNotificationTips:T}=(0,S.e6)();(0,c.useEffect)(()=>{F()},[]);let D=()=>{T()&&C("browser_notification_auth_guide_click",{location:"notification_message",result:"ignore"}),t()},F=async()=>{try{d(!0),v(!1);let a=await A({cursor:null!=m?m:"",page_size:12});if(0===a.code&&a.data){var e,t;l(e=>{var t;return[...e,...(null===(t=a.data)||void 0===t?void 0:t.notifications)||[]]}),f((null===(e=a.data)||void 0===e?void 0:e.page_info.has_more)||!1),h((null===(t=a.data)||void 0===t?void 0:t.page_info.next_cursor)||void 0)}else p.vF.error("Failed to fetch notifications: ",void 0,a),v(!0)}catch(e){p.vF.error("Failed to fetch notifications:",e),v(!0)}finally{d(!1)}};(0,c.useEffect)(()=>{if(_.current&&_.current.disconnect(),!k.current||!u||b)return;let e=new IntersectionObserver(e=>{e[0].isIntersecting&&!i&&u&&!b&&F()},{root:N.current,rootMargin:"300px",threshold:.2});return e.observe(k.current),_.current=e,()=>{_.current&&_.current.disconnect()}},[i,u,b]);let M=()=>{F()};return(0,n.jsxs)("div",{className:(0,g.cn)("z-10 flex flex-col items-stretch rounded-[16px] border border-black/3 bg-white shadow-[0px_16px_32px_-1px_rgba(0,0,0,0.1)]","absolute top-8 -right-12 m-1 w-[400px]","max-sm:fixed max-sm:right-0 max-sm:bottom-0 max-sm:left-0 max-sm:m-0 max-sm:w-screen max-sm:rounded-b-none",a?"max-sm:top-28":"max-sm:top-12"),children:[(0,n.jsx)("div",{ref:w,className:"fixed top-0 left-0 -z-1 h-full w-full",onClick:e=>{e.target===w.current&&(e.stopPropagation(),e.preventDefault(),D())}}),(0,n.jsxs)("div",{className:"mx-5 mt-4 mb-2 flex items-center justify-between",children:[(0,n.jsx)("h3",{className:"text-[16px] font-bold",children:"Notification"}),(0,n.jsx)(r.Qks,{className:"hover:text-brand h-4 w-4 cursor-pointer",onClick:D})]}),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"px-2.5",children:(0,n.jsx)(U,{onNotificationTipsAction:e=>{e?E():R()}})}),0===o.length?(0,n.jsx)("div",{className:"mb-2 flex h-36 w-full max-w-full items-center justify-center px-5",children:i?(0,n.jsx)(r.xNY,{className:"h-6 w-6 animate-spin text-black/65"}):b?(0,n.jsxs)("button",{onClick:M,className:"border-brand hover:bg-brand/10 flex cursor-pointer items-center gap-2 rounded-[8px] border px-2 py-1 text-[14px]",children:[(0,n.jsx)(r.Ll9,{className:"h-4 w-4"}),(0,n.jsx)("span",{children:"Retry"})]}):(0,n.jsx)("p",{className:"text-[12px] text-black/66",children:"You don't have any notifications."})}):(0,n.jsx)("div",{ref:N,className:(0,g.cn)("mb-2 w-full max-w-full flex-1 space-y-1 overflow-y-scroll overscroll-contain px-2.5 sm:max-h-[min(600px,calc(100vh-240px))]",j&&"border-t border-black/6"),onScroll:()=>{N.current&&y(N.current.scrollTop>0)},children:(0,n.jsxs)(n.Fragment,{children:[o.map((e,t)=>(0,n.jsxs)(c.Fragment,{children:[t>0&&e.is_read&&!o[t-1].is_read&&(0,n.jsx)("div",{className:"p-2 pt-3 text-[12px] text-black/65",children:"Earlier"},"divider-".concat(t)),(0,n.jsx)(L,{index:t,notification:e,enter_from:s},e.id)]},e.id)),u&&(0,n.jsx)("div",{ref:k,className:"flex items-center justify-center py-4",children:i?(0,n.jsx)(r.xNY,{className:"h-6 w-6 animate-spin text-black/65"}):b?(0,n.jsxs)("button",{onClick:M,className:"border-brand hover:bg-brand/10 flex cursor-pointer items-center gap-2 rounded-[8px] border px-2 py-1 text-[14px]",children:[(0,n.jsx)(r.Ll9,{className:"h-4 w-4"}),(0,n.jsx)("span",{children:"Load more"})]}):(0,n.jsx)("div",{className:"h-4 w-full"})})]})})]})]})}function G(e){let{hasBanner:t=!1,defaultOpen:a=!1,enter_from:s}=e,[o,l]=(0,c.useState)(a),[d,f]=(0,c.useState)(0),{track:m}=(0,x.s)(),{user:h}=(0,u.A)(),v=(0,i.useRouter)();(0,c.useEffect)(()=>{h&&setTimeout(()=>{j()},200)},[]);let j=async()=>{try{var e;let t=await k();"number"==typeof(null===(e=t.data)||void 0===e?void 0:e.unread_count)&&(f(t.data.unread_count),m("notification_entrance_show",{unread_message_num:t.data.unread_count}))}catch(e){p.vF.error("Failed to fetch notification count:",e)}},y=async()=>{if(l(!1),d){f(0);try{await N()}catch(e){p.vF.error("Failed to mark all notifications as read:",e)}}};return(0,n.jsxs)("div",{className:"relative ml-2",children:[(0,n.jsxs)(w.m_,{open:!o&&void 0,children:[(0,n.jsx)(w.k$,{asChild:!0,children:(0,n.jsxs)("button",{className:(0,g.cn)("cursor-pointer rounded-[10px] p-2 transition-all hover:bg-black/3",o&&"bg-black/3"),onClick:()=>{if(!h){let e=(0,b.$)(!0);v.push("".concat(e,"/login?returnTo=").concat(encodeURIComponent(window.location.pathname+window.location.search)));return}l(!0),m("notification_entrance_click",{unread_message_num:d})},"aria-label":"Notifications",children:[(0,n.jsx)(r.Biv,{size:16,className:"cursor-pointer text-black/95"}),d>0&&(0,n.jsx)("div",{className:"absolute top-[6px] right-[5px] h-[11px] rounded-full bg-[#D42727] px-1 text-[8px] leading-[11px] text-white",children:d>99?"99+":d})]})}),(0,n.jsx)(w.ZI,{children:"Notification"})]}),o&&(0,n.jsx)(W,{hasBanner:t,onClose:y,enter_from:s})]})}var P=a(11518),Y=a.n(P),H=a(47606);let K=()=>{let{user:e,logout:t}=(0,u.A)(),[a,s]=(0,c.useState)(!1),o=(0,c.useRef)(null),l=(0,i.useRouter)(),[d,p]=(0,c.useState)(""),{track:m}=(0,x.s)(),b=(0,c.useRef)(null),v=(0,h.I)(!1,1200),j=(0,c.useMemo)(()=>(null==e?void 0:e.plan)==="Pro",[null==e?void 0:e.plan]);(0,c.useEffect)(()=>{p(window.location.pathname)},[]),(0,c.useEffect)(()=>{let e=e=>{o.current&&!o.current.contains(e.target)&&s(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);let y=async()=>{try{await t(),l.push("/home")}catch(e){(0,f.P)({message:"Failed to logout, please try again later",type:"error"})}s(!1)},w=()=>{(null==e?void 0:e.uid)&&l.push("/profile/".concat(e.uid))},_=t=>{(null==e?void 0:e.uid)&&(j||m("sub_upgrade_click",{click_from:"subscribe"}),window.open("/subscription","_blank"))};return e?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:(0,g.cn)("bg-brand mr-3 flex h-8 cursor-pointer items-center rounded-[10px] text-[14px] text-white",j?"gap-[6px] pr-2.5 pl-2 font-bold":"px-2.5"),onClick:()=>_("header"),children:[j&&(0,n.jsx)(r.xsv,{className:"h-[14px] w-[14px]"}),(0,n.jsx)("span",{children:j?"Pro":"Upgrade"})]}),(0,n.jsxs)("div",{ref:o,onMouseEnter:()=>{b.current&&(clearTimeout(b.current),b.current=null),s(!0)},onMouseLeave:()=>{b.current=setTimeout(()=>{s(!1)},300)},onClick:()=>{v?s(!0):w()},className:"jsx-29af56ad2ef10cea "+"relative cursor-pointer rounded-full p-1 ".concat(a&&"bg-black/6"),children:[(0,n.jsx)("div",{className:"jsx-29af56ad2ef10cea flex cursor-pointer items-center",children:(0,n.jsx)("div",{"aria-label":"Go to profile",className:"jsx-29af56ad2ef10cea "+"rounded-full bg-black/6 transition-transform focus:outline-none ".concat(d==="/profile/".concat(e.uid)&&"ring ring-black ring-offset-2"),children:(0,n.jsx)("img",{src:e.photo_url||"/images/avatar.svg",alt:"User avatar",className:"jsx-29af56ad2ef10cea h-7.5 w-7.5 overflow-hidden rounded-full object-cover"})})}),a&&(0,n.jsxs)("div",{style:{animation:"fadeIn 0.2s ease-out"},className:"jsx-29af56ad2ef10cea absolute top-10 right-0 z-10 w-[260px] rounded-[16px] border border-black/3 bg-white p-1 shadow-lg",children:[(0,n.jsxs)("div",{className:"jsx-29af56ad2ef10cea flex flex-col items-center gap-2 px-3 py-6",children:[(0,n.jsx)("div",{onClick:w,className:"jsx-29af56ad2ef10cea h-16 w-16 cursor-pointer overflow-hidden rounded-full bg-black/6",children:(0,n.jsx)("img",{src:e.photo_url||"/images/avatar.svg",alt:"User avatar",className:"jsx-29af56ad2ef10cea h-16 w-16 rounded-full object-cover"})}),(0,n.jsxs)("div",{className:"jsx-29af56ad2ef10cea w-full space-y-0.5",children:[(0,n.jsx)("div",{className:"jsx-29af56ad2ef10cea line-clamp-2 w-full text-center text-[16px] sm:text-[20px]",children:e.display_name||"User"}),(0,n.jsx)("div",{className:"jsx-29af56ad2ef10cea w-full truncate text-center text-[12px] text-black/65",children:e.email})]}),"number"==typeof e.coins&&(0,n.jsx)(H.A,{points:e.coins,hoverAlign:"center"})]}),(0,n.jsx)("div",{className:"jsx-29af56ad2ef10cea mx-3 my-1 h-px bg-black/6"}),(0,n.jsxs)("button",{onClick:w,className:"jsx-29af56ad2ef10cea flex h-10 w-full cursor-pointer items-center gap-2 rounded-[12px] px-3 text-black transition-colors hover:bg-black/6",children:[(0,n.jsx)(r.IuU,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"jsx-29af56ad2ef10cea text-black/95",children:"Profile"})]}),(0,n.jsxs)("button",{onClick:()=>_("subscribe"),className:"jsx-29af56ad2ef10cea flex h-10 w-full cursor-pointer items-center gap-2 rounded-[12px] px-3 text-black transition-colors hover:bg-black/6",children:[(0,n.jsx)(r.GDL,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"jsx-29af56ad2ef10cea text-black/95",children:"Subscribe"})]}),(0,n.jsx)("div",{className:"jsx-29af56ad2ef10cea mx-3 my-1 h-px bg-black/6"}),(0,n.jsxs)("button",{onClick:y,className:"jsx-29af56ad2ef10cea flex h-10 w-full cursor-pointer items-center gap-2 rounded-[12px] px-3 text-black transition-colors hover:bg-black/6",children:[(0,n.jsx)(r.jfQ,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"jsx-29af56ad2ef10cea text-black/95",children:"Logout"})]})]}),(0,n.jsx)(Y(),{id:"29af56ad2ef10cea",children:"@-webkit-keyframes fadeIn{from{opacity:0;-webkit-transform:translatey(-10px);transform:translatey(-10px)}to{opacity:1;-webkit-transform:translatey(0);transform:translatey(0)}}@-moz-keyframes fadeIn{from{opacity:0;-moz-transform:translatey(-10px);transform:translatey(-10px)}to{opacity:1;-moz-transform:translatey(0);transform:translatey(0)}}@-o-keyframes fadeIn{from{opacity:0;-o-transform:translatey(-10px);transform:translatey(-10px)}to{opacity:1;-o-transform:translatey(0);transform:translatey(0)}}@keyframes fadeIn{from{opacity:0;-webkit-transform:translatey(-10px);-moz-transform:translatey(-10px);-o-transform:translatey(-10px);transform:translatey(-10px)}to{opacity:1;-webkit-transform:translatey(0);-moz-transform:translatey(0);-o-transform:translatey(0);transform:translatey(0)}}"})]})]}):null},V=e=>{let{showBanner:t=!1,hideRight:a=!1,initialMobile:o,initialBannerVisible:x,initialNotificationOpen:f,enter_from:v}=e,{user:w}=(0,u.A)(),_=(0,i.usePathname)(),k=(0,i.useRouter)(),[N,A]=(0,c.useState)("/"),[S,C]=(0,c.useState)(null!=x&&x),[R,E]=(0,c.useState)(!1),T=(0,h.I)(o||!1,768);(0,c.useEffect)(()=>{location.origin.includes(".app")&&A((0,b.$)())},[]),(0,c.useEffect)(()=>{void 0===x&&C(j.showBanner())},[x]);let D=t&&S,F=!w&&("/home"===_||"/"===_);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(y,{showBanner:D,onClose:()=>{C(!1)},initialBannerState:x}),F&&(0,n.jsx)(m,{onSuccess:()=>{k.refresh()},onError:e=>{p.Ay.error("Google One Tap error:",e)}}),(0,n.jsx)("header",{className:"h-14 w-full",children:(0,n.jsxs)("div",{className:"bg-body fixed right-0 left-0 z-50 flex h-14 w-full items-center justify-between px-4 transition-all duration-300 ".concat(D?"top-[64px] min-[840px]:top-[50px]":"top-0"),children:[(0,n.jsx)(l(),{href:N,children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(s.A,{className:"text-brand h-6 w-6"}),(0,n.jsx)("div",{className:"mt-[3px] text-base text-black/95 lg:text-xl xl:text-[20px] ".concat(!a&&"max-[400px]:hidden"),children:"YouWare"})]})}),!a&&(0,n.jsxs)("div",{className:"flex items-center",children:[!T&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l(),{href:"/blog",className:(0,g.cn)("ml-2 cursor-pointer rounded-[10px] px-3 py-2 text-[14px] transition-all hover:bg-black/6",_.startsWith("/blog")&&"font-bold"),children:"Academy"}),(0,n.jsx)(l(),{href:"/affiliate",className:(0,g.cn)("ml-2 cursor-pointer rounded-[10px] px-3 py-2 text-[14px] transition-all hover:bg-black/6",_.startsWith("/affiliate")&&"font-bold"),children:"Affiliate"}),(0,n.jsx)(l(),{href:"https://discord.gg/youware",target:"_blank",className:"ml-2 cursor-pointer rounded-[10px] px-3 py-2 text-[14px] transition-all hover:bg-black/6",children:"Discord"})]}),(0,n.jsx)(G,{hasBanner:D,defaultOpen:f,enter_from:v}),(0,n.jsx)("div",{className:"ml-3 h-[12px] w-[0px] bg-black/12"}),w?(0,n.jsx)(K,{}):(0,n.jsx)(l(),{href:(0,b.$)(!0)+"/login",className:"bg-brand h-8 rounded-[10px] px-2.5 text-[14px] leading-8 text-white",children:"Sign in"}),T&&(0,n.jsxs)(d.rI,{triggerType:"hover",onOpenChange:e=>{E(e)},children:[(0,n.jsx)(d.ty,{className:(0,g.cn)("ml-2 rounded-[10px] p-2 hover:bg-black/6",R&&"bg-black/6 hover:bg-black/6"),children:(0,n.jsx)(r.tOc,{size:18,className:"text-black/95"})}),(0,n.jsxs)(d.SQ,{className:"right-0 mt-2 w-36",children:[(0,n.jsx)(d._2,{icon:r.L4U,label:"Academy",onClick:()=>k.push("/blog")}),(0,n.jsx)(d._2,{icon:r.C_5,label:"Affiliate",onClick:()=>k.push("/affiliate")}),(0,n.jsx)(d._2,{icon:r.cyn,label:"Community",onClick:()=>{window.open("https://discord.gg/youware","_blank")}})]})]})]})]})})]})}}}]);