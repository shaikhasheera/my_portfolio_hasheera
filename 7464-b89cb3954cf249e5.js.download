try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="9bb93387-8c0f-4025-87dc-e58c7477290c",e._sentryDebugIdIdentifier="sentry-dbid-9bb93387-8c0f-4025-87dc-e58c7477290c")}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7464],{707:(e,t,r)=>{r.d(t,{S:()=>a});var l=r(34477);let a=(0,l.createServerReference)("40765cd84cf16f0018a5e81b1c99cc16ea5026c8eb",l.callServer,void 0,l.findSourceMapURL,"checkSlugPrefix")},49972:(e,t,r)=>{r.d(t,{Ks:()=>a,wg:()=>l});var l=function(e){return e[e.PUBLIC=0]="PUBLIC",e[e.PRIVATE=1]="PRIVATE",e}({}),a=function(e){return e.DRAFT="draft",e.PUBLISHED="published",e}({})},80246:(e,t,r)=>{r.d(t,{A:()=>_});var l=r(95155),a=r(25427),n=r(12115),c=r(10862),o=r(56389),s=r(49972),i=r(48436);let d=e=>{let{project:t,isCreator:r,location:c}=e,{track:d}=(0,o.s)(),p=t.visibility===s.wg.PUBLIC,u="".concat(window.location.origin).concat(t.project_url);return(0,n.useEffect)(()=>{d("share_pop_up_show",{project_id:t.project_id,project_url:t.project_url,location:c,is_public:+!!p,is_owner:!!r})},[c,r]),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{className:"flex h-9 gap-3",children:[(0,l.jsxs)("div",{className:"flex h-9 min-w-0 flex-1 items-center justify-between gap-1 rounded-[10px] border border-black/6 px-3",children:[p?(0,l.jsx)(a.bl6,{size:16}):(0,l.jsx)(a.XJr,{size:16}),(0,l.jsx)("a",{className:"mt-1 flex-1 truncate text-[14px] text-black/95 hover:underline",href:u,target:"_blank",title:u,children:u}),(0,l.jsx)(a.SJ3,{size:16})]}),(0,l.jsx)("div",{className:"bg-brand flex h-9 w-9 shrink-0 cursor-pointer items-center justify-center rounded-[10px] text-white",onClick:()=>{let e=p?u:"Link: ".concat(u,"\nPasscode: ").concat(t.passcode);navigator.clipboard.writeText(e),(0,i.P)({message:p?"Link copied to clipboard":"Link and passcode copied to clipboard",type:"success",icon:!p&&(0,l.jsx)(a.XJr,{className:"h-4 w-4 text-[#14AE5C]"})}),d("share_copy_link_click",{project_id:t.project_id,project_url:t.project_url,location:c,is_public:+!!p,is_owner:+!!r})},children:(0,l.jsx)(a.NGz,{size:16})})]}),!p&&(0,l.jsxs)("div",{className:"pl-1 text-[12px] text-black/45",children:[(0,l.jsx)("span",{children:"Access requires passcode:"}),(0,l.jsx)("b",{children:t.passcode})]})]})},p=e=>{let{project:t,location:r,isCreator:c,title:o,shareImageUrl:s,targetUrl:i,shareActions:d,onTrack:p}=e,u="".concat(window.location.origin).concat(t.project_url),m=null!=i?i:u,x=t.custom_title||t.title||"",[h,f]=(0,n.useState)(!1),[j,b]=(0,n.useState)(!1),g=(0,n.useRef)(null);return(0,n.useEffect)(()=>{let e=()=>{let e=g.current;e&&(f(e.scrollLeft>0),b(e.scrollLeft<e.scrollWidth-e.clientWidth-1))},t=g.current;return t&&(t.addEventListener("scroll",e),e(),setTimeout(e,100)),()=>{t&&t.removeEventListener("scroll",e)}},[d.length]),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"my-4 pl-1 text-[12px] font-bold",children:null!=o?o:"Share For More Views"}),(0,l.jsxs)("div",{className:"relative overflow-visible",children:[(0,l.jsx)("div",{ref:g,className:"no-scrollbar flex flex-nowrap gap-1 overflow-x-auto",children:d.map(e=>(0,l.jsxs)("div",{className:"flex w-[70px] flex-shrink-0 cursor-pointer flex-col items-center gap-2",onClick:()=>{let l={url:m,title:x,imageUrl:s,isCreator:c};if(p({project_url:t.project_url,social_platform:e.name,location:r}),"action"===e.type)e.onClick(l);else if("platform"===e.type){let t=e.getShareUrl(l);window.open(t,"_blank")}},children:[(0,l.jsx)("img",{src:e.icon,alt:e.name,className:"h-[52px] w-[52px] rounded-full bg-black/3"}),(0,l.jsx)("span",{className:"truncate text-center text-[12px] text-black/65",children:e.name})]},e.name))}),h&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"absolute top-[14px] left-0 z-10 h-6 w-6 cursor-pointer rounded-full bg-white p-1.5 shadow-[0_0_10px_0_rgba(0,0,0,0.1)]",onClick:()=>{g.current&&(g.current.scrollLeft-=200)},children:(0,l.jsx)(a.M0J,{className:"h-3 w-3"})}),(0,l.jsx)("div",{className:"absolute top-0 left-0 h-full w-10 bg-gradient-to-r from-white to-transparent"})]}),j&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"absolute top-[14px] right-0 z-10 h-6 w-6 cursor-pointer rounded-full bg-white p-1.5 shadow-[0_0_10px_0_rgba(0,0,0,0.1)]",onClick:()=>{g.current&&(g.current.scrollLeft+=200)},children:(0,l.jsx)(a.D8V,{className:"h-3 w-3"})}),(0,l.jsx)("div",{className:"absolute top-0 right-0 h-full w-10 bg-gradient-to-l from-white to-transparent"})]})]})]})};var u=r(26846);let m=e=>{let{titleText:t,onTemplateChange:r,templates:a}=e,n=e=>{let{template:t}=e;return(0,l.jsx)("div",{className:(0,u.cn)("flex h-[120px] w-[120px] flex-shrink-0 items-center justify-center rounded-[12px] border border-black/6"),children:t?(0,l.jsx)("img",{src:t.template_icon,alt:" ",className:"h-full w-full cursor-pointer",onClick:()=>null==r?void 0:r(t)}):(0,l.jsx)(c,{})},(null==t?void 0:t.template_id)||"skeleton")},c=()=>(0,l.jsx)("div",{className:"h-full w-full animate-pulse rounded-[12px] bg-black/5"});return(0,l.jsxs)("div",{children:[t&&(0,l.jsx)("div",{className:"my-4 pl-1 text-[12px] font-bold",children:t}),(0,l.jsx)("div",{className:"no-scrollbar flex flex-row gap-3 overflow-x-auto",children:a.length>0?a.map(e=>(0,l.jsx)(n,{template:e},e.template_id)):Array.from({length:3}).map((e,t)=>(0,l.jsx)(n,{},t))})]})};var x=r(62128);let h=[{name:"X",icon:"/sns/x.png",getShareUrl:e=>{let t;return t=e.isCreator?"I didn't write a single line of code — just built ".concat(e.title," with @YouWareAI.\nTry it here \uD83D\uDC49 ").concat(e.url,"\n#YouWare"):"I found an amazing project on @YouWareAI: ".concat(e.title,". Check it out here \uD83D\uDC49 ").concat(e.url,"\n#YouWare"),"https://twitter.com/intent/tweet?text=".concat(encodeURIComponent(t))},type:"platform"},{name:"Reddit",icon:"/sns/reddit.png",getShareUrl:e=>"https://www.reddit.com/submit?url=".concat(encodeURIComponent(e.url),"&title=").concat(encodeURIComponent(e.title)),type:"platform"},{name:"WhatsApp",icon:"/sns/whatsapp.png",getShareUrl:e=>{let t="".concat(e.title,"\n").concat(e.url);return"https://wa.me/?text=".concat(encodeURIComponent(t))},type:"platform"},{name:"Telegram",icon:"/sns/telegram.png",getShareUrl:e=>{let t="".concat(e.title,"\n").concat(e.url);return"https://t.me/share/url?url=".concat(encodeURIComponent(e.url),"&text=").concat(encodeURIComponent(t))},type:"platform"},{name:"Threads",icon:"/sns/threads.png",getShareUrl:e=>{let t;return t=e.isCreator?"I didn't write a single line of code — just built ".concat(e.title,".\nTry it here: ").concat(e.url,"\n#YouWare"):"I found an amazing project on @YouWareAI: ".concat(e.title,". Check it out here \uD83D\uDC49 ").concat(e.url,"\n#YouWare"),"https://www.threads.net/intent/post?text=".concat(encodeURIComponent(t))},type:"platform"},{name:"LINE",icon:"/sns/line.png",getShareUrl:e=>"https://social-plugins.line.me/lineit/share?url=".concat(encodeURIComponent(e.url)),type:"platform"},{name:"LinkedIn",icon:"/sns/linkedin.png",getShareUrl:e=>"https://www.linkedin.com/shareArticle?mini=true&url=".concat(encodeURIComponent(e.url)),type:"platform"},{name:"Bluesky",icon:"/sns/bluesky.png",getShareUrl:e=>{let t;return t=e.isCreator?"I didn't write a single line of code — just built ".concat(e.title,".\nTry it here \uD83D\uDC49 ").concat(e.url,"\n#YouWare"):"I found an amazing project on @YouWareAI: ".concat(e.title,". Check it out here \uD83D\uDC49 ").concat(e.url,"\n#YouWare"),"https://bsky.app/intent/compose?text=".concat(encodeURIComponent(t))},type:"platform"}];var f=r(34477);let j=(0,f.createServerReference)("60182fa22724035bd2ea0477b4c7e412b2b4ddd9be",f.callServer,void 0,f.findSourceMapURL,"genShareUrl"),b=(0,f.createServerReference)("4034f60142bdc5bc3b29e96bf1bc96627cac6cc467",f.callServer,void 0,f.findSourceMapURL,"getShareTemplateList"),g=(e,t,r)=>{let[l,a]=(0,n.useState)(r||[]),[c,o]=(0,n.useState)(t||null),[s,i]=(0,n.useState)(null),[d,p]=(0,n.useState)(!1);(0,n.useEffect)(()=>{(async()=>{if(!(l.length>0))try{let t=await b(e);0===t.code&&t.data?a(t.data.templates):x.vF.info("get share template list failed",t)}catch(e){x.vF.error("fetch templates error",e)}})()},[]);let u=(0,n.useCallback)(async t=>{o(t),i(null),p(!0);try{let r=await j(e,t.template_id);r.data&&t.template_id===r.data.template_id?i(r.data):console.log("gen share url res not match",r,t)}catch(e){x.vF.error("generate share url error",e)}finally{p(!1)}},[e,c]);return(0,n.useEffect)(()=>{t&&u(t)},[t]),{templates:l,selectedTemplate:c,templateCover:s,isLoading:d,handleTemplateChange:u}},w=e=>{let{project:t,location:r,initialSelectedTemplate:n,initialTemplates:c,onBack:s}=e,{templates:i,selectedTemplate:d,templateCover:m,handleTemplateChange:f}=g(t.project_id,n,c),{track:j}=(0,o.s)(),b=new URL("".concat(window.location.origin).concat(t.project_url));b.searchParams.set("type","card");let w=async()=>{if(m)try{var e;let r=await fetch(m.origin_url),l=await r.blob(),a=window.URL.createObjectURL(l),n=document.createElement("a");n.href=a;let c=(t.title||"".concat(null===(e=t.user)||void 0===e?void 0:e.display_name,"'s YouWare Project")).replace(/\s+/g,"-").toLowerCase();n.download="".concat(c,"-").concat(null==d?void 0:d.template_id,".png"),document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(a)}catch(e){x.vF.error("Save image failed:",e)}},_=e=>{j("share_card_to_social_platform_click",e)};return(0,l.jsxs)("div",{className:"flex w-[512px] max-w-[calc(100vw-32px)] flex-col gap-4 rounded-[20px] bg-white p-4",style:{boxShadow:"0px 0px 2px 0px rgba(0, 0, 0, 0.10), 0px 16px 32px -1px rgba(0, 0, 0, 0.05)"},children:[(0,l.jsx)("div",{className:"w-full items-center justify-start px-1",children:(0,l.jsx)("div",{className:"flex h-6 w-6 cursor-pointer items-center justify-center rounded-full hover:bg-black/5",onClick:s,children:(0,l.jsx)(a.M0J,{className:"h-4 w-4 text-black"})})}),(0,l.jsx)("div",{className:"flex items-center justify-center",children:(0,l.jsx)("div",{className:"flex aspect-square w-full items-center justify-center rounded-[16px] bg-black/5 md:h-[360px] md:w-[360px]",children:m?(0,l.jsx)("img",{src:m.share_url,alt:" ",className:"flex h-full w-full rounded-[16px] bg-black/5 object-contain",draggable:!1}):(0,l.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,l.jsx)(a.xNY,{className:"h-5 w-5 animate-spin text-black/50"})})})}),(0,l.jsx)("div",{className:"flex items-center justify-center",children:(0,l.jsx)("div",{className:"no-scrollbar flex flex-row gap-3 overflow-x-auto",children:i.map(e=>(0,l.jsx)("div",{className:(0,u.cn)("flex h-[80px] w-[80px] cursor-pointer items-center justify-center rounded-[12px] border border-black/6",(null==d?void 0:d.template_id)===(null==e?void 0:e.template_id)?"border-brand border-2":""),onClick:()=>e&&f(e),children:(0,l.jsx)("img",{src:e.template_icon,alt:" ",className:"pointer-events-none h-full w-full",draggable:!1},e.template_id)},null==e?void 0:e.template_id))})}),(0,l.jsx)(p,{project:t,location:r,title:"Share to",targetUrl:b.toString(),shareActions:[{name:"Save Image",icon:"/sns/download.png",type:"action",onClick:w},...h],onTrack:e=>_({...e,project_id:t.project_id,template_name:(null==d?void 0:d.template_id)||"",template_index:i.indexOf(d||{})+1})})]})},_=e=>{var t;let{project:r,onClose:s,location:i}=e,[u,x]=(0,n.useState)("main"),[f,j]=(0,n.useState)(null),{templates:b}=g(r.project_id),{track:_}=(0,o.s)(),{user:v}=(0,c.A)(),k=(null===(t=r.user)||void 0===t?void 0:t.uid)===(null==v?void 0:v.uid),y=e=>{"main"===u&&(j(e),x("share-template"),_("share_card_template_click",{template_name:e.template_id,template_index:b.indexOf(e)+1,project_id:r.project_id,project_url:r.project_url,location:i}))},N=e=>{_("share_to_social_platform_click",{project_id:r.project_id,project_url:e.project_url,social_platform:e.social_platform,location:i,is_owner:+!!k})};return(0,l.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/20",onClick:e=>{e.target===e.currentTarget&&s()},children:["main"===u&&(0,l.jsx)(()=>(0,l.jsxs)("div",{className:"flex w-[512px] max-w-[calc(100vw-32px)] flex-col gap-4 rounded-[20px] bg-white p-5",style:{boxShadow:"0px 0px 2px 0px rgba(0, 0, 0, 0.10), 0px 16px 32px -1px rgba(0, 0, 0, 0.05)"},children:[(0,l.jsxs)("div",{className:"flex items-start justify-between pl-1",children:[(0,l.jsx)("div",{className:"text-[20px] font-bold",children:"Share Project"}),(0,l.jsx)(a.Qks,{onClick:()=>s(),className:"cursor-pointer",size:16})]}),(0,l.jsx)(d,{project:r,location:i,isCreator:k}),(0,l.jsx)(p,{project:r,location:i,isCreator:k,shareActions:h,onTrack:N}),k&&(0,l.jsx)(m,{onTemplateChange:y,titleText:"Share It in Style",templates:b})]}),{}),"share-template"===u&&(0,l.jsx)(w,{project:r,location:i,initialSelectedTemplate:null!=f?f:void 0,initialTemplates:b,onBack:()=>x("main")})]})}}}]);